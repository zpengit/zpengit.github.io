<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>12-mybatis框架 | ZpengBlog</title><meta name="description" content="12-mybatis框架unit12-mybatis框架 a0a2eb9fa872009998f7cd818925095d 课程计划： 1、MyBatis快速入门 2、MyBatis对数据库中数据的增删改查操作 3、#{}占位符的应用 4、动态SQL的应用 5、MyBatis的Mapper接口开发 MyBatis简介(了解)什么是MyBatisMyBatis 本是apache的一个开源项目iBat"><meta name="keywords" content="javaweb,mybatis"><meta name="author" content="Zpeng"><meta name="copyright" content="Zpeng"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://www.zhangpeng.fun/upload/2019/12/timg-747430f3d93543edb6bdfefcd6550b1b.jfif"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="12-mybatis框架"><meta name="twitter:description" content="12-mybatis框架unit12-mybatis框架 a0a2eb9fa872009998f7cd818925095d 课程计划： 1、MyBatis快速入门 2、MyBatis对数据库中数据的增删改查操作 3、#{}占位符的应用 4、动态SQL的应用 5、MyBatis的Mapper接口开发 MyBatis简介(了解)什么是MyBatisMyBatis 本是apache的一个开源项目iBat"><meta name="twitter:image" content="https://zpengit.github.io/images/avatar.jpg"><meta property="og:type" content="article"><meta property="og:title" content="12-mybatis框架"><meta property="og:url" content="https://zpengit.github.io/2020/06/11/12-mybatis%E6%A1%86%E6%9E%B6/"><meta property="og:site_name" content="ZpengBlog"><meta property="og:description" content="12-mybatis框架unit12-mybatis框架 a0a2eb9fa872009998f7cd818925095d 课程计划： 1、MyBatis快速入门 2、MyBatis对数据库中数据的增删改查操作 3、#{}占位符的应用 4、动态SQL的应用 5、MyBatis的Mapper接口开发 MyBatis简介(了解)什么是MyBatisMyBatis 本是apache的一个开源项目iBat"><meta property="og:image" content="https://zpengit.github.io/images/avatar.jpg"><meta property="article:published_time" content="2020-06-11T10:52:58.734Z"><meta property="article:modified_time" content="2020-06-11T10:46:10.893Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = 'false'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://zpengit.github.io/2020/06/11/12-mybatis%E6%A1%86%E6%9E%B6/"><link rel="prev" title="13-spring框架" href="https://zpengit.github.io/2020/06/11/13-spring%E6%A1%86%E6%9E%B6/"><link rel="next" title="11-MySQL数据库事务" href="https://zpengit.github.io/2020/06/11/11-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: Zpeng","link":"链接: ","source":"来源: ZpengBlog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="ZpengBlog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://www.zhangpeng.fun/upload/2019/12/timg-747430f3d93543edb6bdfefcd6550b1b.jfif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">79</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">74</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/bangumis/"><i class="fa-fw fa fa-television"></i><span> 番剧</span></a></li><li><a class="site-page" href="/steamgames/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa fa-send"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#12-mybatis框架"><span class="toc-number">1.</span> <span class="toc-text">12-mybatis框架</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#unit12-mybatis框架"><span class="toc-number">2.</span> <span class="toc-text">unit12-mybatis框架</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis简介-了解"><span class="toc-number">2.1.</span> <span class="toc-text">MyBatis简介(了解)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#什么是MyBatis"><span class="toc-number">2.1.1.</span> <span class="toc-text">什么是MyBatis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为什么要使用MyBatis"><span class="toc-number">2.1.2.</span> <span class="toc-text">为什么要使用MyBatis</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis快速入门"><span class="toc-number">2.2.</span> <span class="toc-text">MyBatis快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#准备数据，创建库和表"><span class="toc-number">2.2.1.</span> <span class="toc-text">准备数据，创建库和表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建工程，导入所需jar包、创建测试类"><span class="toc-number">2.2.2.</span> <span class="toc-text">创建工程，导入所需jar包、创建测试类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加mybatis-config-xml文件"><span class="toc-number">2.2.3.</span> <span class="toc-text">添加mybatis-config.xml文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加EmpMapper-xml文件"><span class="toc-number">2.2.4.</span> <span class="toc-text">添加EmpMapper.xml文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加并编写Emp实体类"><span class="toc-number">2.2.5.</span> <span class="toc-text">添加并编写Emp实体类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实现测试类-并测试"><span class="toc-number">2.2.6.</span> <span class="toc-text">实现测试类,并测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis入门细节"><span class="toc-number">2.3.</span> <span class="toc-text">MyBatis入门细节</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis-config-xml配置文件"><span class="toc-number">2.3.1.</span> <span class="toc-text">mybatis-config.xml配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EmpMapper-xml配置文件"><span class="toc-number">2.3.2.</span> <span class="toc-text">EmpMapper.xml配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis增删改查"><span class="toc-number">2.4.</span> <span class="toc-text">MyBatis增删改查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#新增员工"><span class="toc-number">2.4.1.</span> <span class="toc-text">新增员工</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改员工"><span class="toc-number">2.4.2.</span> <span class="toc-text">修改员工</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除员工"><span class="toc-number">2.4.3.</span> <span class="toc-text">删除员工</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis中的占位符"><span class="toc-number">2.5.</span> <span class="toc-text">mybatis中的占位符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#占位符"><span class="toc-number">2.5.1.</span> <span class="toc-text">#{}占位符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#占位符-1"><span class="toc-number">2.5.2.</span> <span class="toc-text">${}占位符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#动态SQL标签"><span class="toc-number">2.6.</span> <span class="toc-text">动态SQL标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#if、where标签"><span class="toc-number">2.6.1.</span> <span class="toc-text">if、where标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#foreach元素"><span class="toc-number">2.6.2.</span> <span class="toc-text">foreach元素</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mapper接口开发"><span class="toc-number">2.7.</span> <span class="toc-text">Mapper接口开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapper接口开发介绍"><span class="toc-number">2.7.1.</span> <span class="toc-text">Mapper接口开发介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapper接口开发实现"><span class="toc-number">2.7.2.</span> <span class="toc-text">Mapper接口开发实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#几个可以优化的地方"><span class="toc-number">2.8.</span> <span class="toc-text">几个可以优化的地方</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#加入log4j日志框架"><span class="toc-number">2.8.1.</span> <span class="toc-text">加入log4j日志框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL语句中的特殊符号"><span class="toc-number">2.8.2.</span> <span class="toc-text">SQL语句中的特殊符号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jdbc-properties文件"><span class="toc-number">2.8.3.</span> <span class="toc-text">jdbc.properties文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#扩展内容"><span class="toc-number">2.9.</span> <span class="toc-text">扩展内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Jdbc回顾"><span class="toc-number">2.9.1.</span> <span class="toc-text">Jdbc回顾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis-config文件没有提示的解决办法"><span class="toc-number">2.9.2.</span> <span class="toc-text">mybatis-config文件没有提示的解决办法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapper文件没有提示的解决办法"><span class="toc-number">2.9.3.</span> <span class="toc-text">Mapper文件没有提示的解决办法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置达内XML-Schema代理服务器"><span class="toc-number">2.9.4.</span> <span class="toc-text">配置达内XML Schema代理服务器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#mybatis-javaweb"><span class="toc-number">3.</span> <span class="toc-text">mybatis   javaweb</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><div class="post-bg" id="nav" style="background-image: url(/images/avatar.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">ZpengBlog</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/photo/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 娱乐</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/bangumis/"><i class="fa-fw fa fa-television"></i><span> 番剧</span></a></li><li><a class="site-page" href="/steamgames/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fa fa-send"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">12-mybatis框架</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-06-11 18:52:58"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-06-11</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-11 18:46:10"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-11</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/JavaWeb/">JavaWeb</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">10.2k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 41 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/2020/06/11/12-mybatis%E6%A1%86%E6%9E%B6/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/06/11/12-mybatis%E6%A1%86%E6%9E%B6/" itemprop="commentCount"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="12-mybatis框架"><a href="#12-mybatis框架" class="headerlink" title="12-mybatis框架"></a>12-mybatis框架</h1><h1 id="unit12-mybatis框架"><a href="#unit12-mybatis框架" class="headerlink" title="unit12-mybatis框架"></a>unit12-mybatis框架</h1><p><a href="https://www.zhangpeng.fun/upload/2020/06/a0a2eb9fa872009998f7cd818925095d-6b1b0b9006c9415f9b5cd8eb016ad6fe.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-75c77a26cbf5168d293d6a589e465b33.png" alt="a0a2eb9fa872009998f7cd818925095d"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/a0a2eb9fa872009998f7cd818925095d-6b1b0b9006c9415f9b5cd8eb016ad6fe.png" target="_blank" rel="noopener">a0a2eb9fa872009998f7cd818925095d</a></p>
<p><strong>课程计划：</strong></p>
<p>1、MyBatis快速入门</p>
<p>2、MyBatis对数据库中数据的增删改查操作</p>
<p>3、#{}占位符的应用</p>
<p>4、动态SQL的应用</p>
<p>5、MyBatis的Mapper接口开发</p>
<h2 id="MyBatis简介-了解"><a href="#MyBatis简介-了解" class="headerlink" title="MyBatis简介(了解)"></a>MyBatis简介(了解)</h2><h3 id="什么是MyBatis"><a href="#什么是MyBatis" class="headerlink" title="什么是MyBatis"></a>什么是MyBatis</h3><p>MyBatis 本是apache的一个开源项目iBatis, 2010年这个项目由apache software foundation 迁移到了google code，并且改名为MyBatis 。2013年11月迁移到Github。</p>
<p>MyBatis是一个优秀的持久层框架，它对jdbc的操作数据库的过程进行封装，使开发者只需要关注SQL本身，而不需要花费精力去处理例如注册驱动、创建connection、创建statement、手动设置参数、结果集检索等jdbc繁杂的过程代码。</p>
<p>Mybatis通过xml或注解的方式将要执行的各种statement（statement、preparedStatemnt）配置起来，并通过java对象和statement中的sql进行映射生成最终执行的sql语句，最后由mybatis框架执行sql并将结果映射成java对象并返回。</p>
<p>总之，Mybatis对JDBC访问数据库的过程进行了封装，简化了JDBC代码，解决JDBC将结果集封装为Java对象的麻烦。</p>
<p>下图是MyBatis架构图：</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/f6d67734982f864da415a2a9cc4908a5-6f8d6ddd9a1a443493e920402464c88a.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-b4e28a478a564166a0712d2a2f55a35a.png" alt="f6d67734982f864da415a2a9cc4908a5"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/f6d67734982f864da415a2a9cc4908a5-6f8d6ddd9a1a443493e920402464c88a.png" target="_blank" rel="noopener">f6d67734982f864da415a2a9cc4908a5</a></p>
<p>(1)mybatis-config.xml是Mybatis的核心配置文件，通过其中的配置可以生成SqlSessionFactory,也就是SqlSession工厂</p>
<p>(2)基于SqlSessionFactory可以生成SqlSession对象</p>
<p>(3)SqlSession是一个既可以发送SQL去执行，并返回结果，类似于JDBC中的Connection对象，也是Mybatis中至关重要的一个对象。</p>
<p>(4)Executor是SqlSession底层的对象，用于执行SQL语句</p>
<p>(5)MapperStatement对象也是SqlSession底层的对象，用于接收输入映射（SQL语句中的参数），以及做输出映射（即将SQL查询的结果映射成相应的结果）</p>
<h3 id="为什么要使用MyBatis"><a href="#为什么要使用MyBatis" class="headerlink" title="为什么要使用MyBatis"></a>为什么要使用MyBatis</h3><p><em>思考：在开始之前，思考下如何通过JDBC查询Emp表中的所有记录，并封装到一个List集合中返回。（演示：准备数据、导包、导入JDBC程序）</em></p>
<p><code>1、使用传统方式JDBC访问数据库：</code></p>
<p>(1)使用JDBC访问数据库有大量重复代码（比如注册驱动、获取连接、获取传输器、释放资源等）；</p>
<p>(2)JDBC自身没有连接池，会频繁的创建连接和关闭连接，效率低；</p>
<p>(3)SQL是写死在程序中，一旦修改SQL，需要对类重新编译；</p>
<p>(4)对查询SQL执行后返回的ResultSet对象，需要手动处理，有时会特别麻烦；</p>
<p>…</p>
<p><code>2、使用mybatis框架访问数据库：</code></p>
<p>(1)Mybatis对JDBC对了封装，可以简化JDBC代码；</p>
<p>(2)Mybatis自身支持连接池（也可以配置其他的连接池），因此可以提高程序的效率；</p>
<p>(3)Mybatis是将SQL配置在mapper文件中，修改SQL只是修改配置文件，类不需要重新编译。</p>
<p>(4)对查询SQL执行后返回的ResultSet对象，Mybatis会帮我们处理，转换成Java对象。</p>
<p>…</p>
<p>总之，JDBC中所有的问题（代码繁琐、有太多重复代码、需要操作太多对象、释放资源、对结果的处理太麻烦等），在Mybatis框架中几乎都得到了解决！！</p>
<h2 id="MyBatis快速入门"><a href="#MyBatis快速入门" class="headerlink" title="MyBatis快速入门"></a>MyBatis快速入门</h2><h3 id="准备数据，创建库和表"><a href="#准备数据，创建库和表" class="headerlink" title="准备数据，创建库和表"></a>准备数据，创建库和表</h3><p>创建yonghedb库、emp表，并插入若干条记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1、创建数据库 yonghedb 数据库</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> <span class="keyword">if</span> <span class="keyword">not</span> <span class="keyword">exists</span> yonghedb <span class="keyword">charset</span> utf8;</span><br><span class="line"><span class="keyword">use</span> yonghedb; <span class="comment">-- 选择yonghedb数据库</span></span><br><span class="line"><span class="comment">-- 2、删除emp表（如果存在）</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> <span class="keyword">if</span> <span class="keyword">exists</span> emp;</span><br><span class="line"><span class="comment">-- 3、在 yonghedb 库中创建 emp 表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    job <span class="built_in">varchar</span>(<span class="number">50</span>),</span><br><span class="line">    salary <span class="keyword">double</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 4、往 emp 表中, 插入若干条记录</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'王海涛'</span>, <span class="string">'程序员'</span>, <span class="number">3300</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'齐雷'</span>, <span class="string">'程序员'</span>, <span class="number">2800</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'刘沛霞'</span>, <span class="string">'程序员鼓励师'</span>, <span class="number">2700</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'陈子枢'</span>, <span class="string">'部门总监'</span>, <span class="number">4200</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'刘昱江'</span>, <span class="string">'程序员'</span>, <span class="number">3000</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'董长春'</span>, <span class="string">'程序员'</span>, <span class="number">3500</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'苍老师'</span>, <span class="string">'程序员'</span>, <span class="number">3700</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="literal">null</span>, <span class="string">'韩少云'</span>, <span class="string">'CEO'</span>, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="创建工程，导入所需jar包、创建测试类"><a href="#创建工程，导入所需jar包、创建测试类" class="headerlink" title="创建工程，导入所需jar包、创建测试类"></a>创建工程，导入所需jar包、创建测试类</h3><p><code>1、创建Maven的java工程</code></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/313e2677abaf6d235c0f8603165739fc-a2a4dd4714274759bd587c4caf933829.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-e021e5968a64ee913dc37f498e677b68.png" alt="313e2677abaf6d235c0f8603165739fc"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/313e2677abaf6d235c0f8603165739fc-a2a4dd4714274759bd587c4caf933829.png" target="_blank" rel="noopener">313e2677abaf6d235c0f8603165739fc</a></p>
<p><code>2、导入junit、mysql、mybaits等开发包</code></p>
<p>在pom.xml文件中引入相关依赖包即可</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- junit单元测试 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mysql驱动 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 整合log4j --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3、创建com.tedu.mybatis.TestMybatis01测试类，并提供findAll方法（查询emp表中所有的员工信息），开发步骤如下：</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/image-20200403151610907-29d0f7809cae4a2cb753c6fdc3098603.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-c898767a508896489fed9f66ee8660f9.png" alt="image-20200403151610907"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/image-20200403151610907-29d0f7809cae4a2cb753c6fdc3098603.png" target="_blank" rel="noopener">image-20200403151610907</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习1(快速入门): 查询emp表中的所有员工, 返回一个List&lt;Emp&gt;集合</span></span><br><span class="line"><span class="comment">* <span class="doctag">@throws</span> IOException */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1.读取mybatis的核心配置文件(mybatis-config.xml)</span></span><br><span class="line">    <span class="comment">//2.通过配置信息获取一个SqlSessionFactory工厂对象</span></span><br><span class="line">    <span class="comment">//3.通过工厂获取一个SqlSession对象</span></span><br><span class="line">    <span class="comment">//4.通过namespace+id找到要执行的sql语句并执行sql语句</span></span><br><span class="line">    <span class="comment">//5.输出结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加mybatis-config-xml文件"><a href="#添加mybatis-config-xml文件" class="headerlink" title="添加mybatis-config.xml文件"></a>添加mybatis-config.xml文件</h3><p><strong>1、在src/main/resources目录下，创建mybatis-config.xml文件</strong>（MyBatis的核心配置文件）</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/3e84b2af713f0ddea7c6164f57806c60-e2b8ff1d02174e1b9b583fd0ea9d172a.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-5f0b41001e860e228cf9ebfa17227a38.png" alt="3e84b2af713f0ddea7c6164f57806c60"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/3e84b2af713f0ddea7c6164f57806c60-e2b8ff1d02174e1b9b583fd0ea9d172a.png" target="_blank" rel="noopener">3e84b2af713f0ddea7c6164f57806c60</a></p>
<p><strong>2、mybatis-config.xml文件配置如下:</strong></p>
<p><code>mybatis-config文件头信息如下：</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">    <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">    <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!-- MyBatis的全局配置文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> &gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>mybatis-config文件详细配置如下：</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">    <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">    <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!-- MyBatis的全局配置文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> &gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 1.配置环境，可配置多个环境（比如：develop开发、test测试） --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"develop"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"develop"</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">&lt;!-- 1.1.配置事务管理方式：JDBC/MANAGED</span></span><br><span class="line"><span class="comment">			JDBC：将事务交给JDBC管理（推荐）</span></span><br><span class="line"><span class="comment">			MANAGED：自己管理事务</span></span><br><span class="line"><span class="comment">			  --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">&lt;!-- 1.2.配置数据源，即连接池 JNDI/POOLED/UNPOOLED</span></span><br><span class="line"><span class="comment">				JNDI：已过时</span></span><br><span class="line"><span class="comment">				POOLED：使用连接池（推荐）</span></span><br><span class="line"><span class="comment">				UNPOOLED：不使用连接池</span></span><br><span class="line"><span class="comment">			 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/yonghedb?characterEncoding=utf-8"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 2.导入Mapper配置文件，如果mapper文件有多个，可以通过多个mapper标签导入 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"EmpMapper.xml"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="添加EmpMapper-xml文件"><a href="#添加EmpMapper-xml文件" class="headerlink" title="添加EmpMapper.xml文件"></a>添加EmpMapper.xml文件</h3><p><strong>1、在src/main/resources目录下，创建EmpMapper.xml文件 （实体类的映射文件）</strong></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/bf0e887dec06ea62dbad0673fe4b2730-3cc8150553244e1aa023202dc5de3db7.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-dd5d2ad4f5c1adb06953a23d53cbd344.png" alt="bf0e887dec06ea62dbad0673fe4b2730"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/bf0e887dec06ea62dbad0673fe4b2730-3cc8150553244e1aa023202dc5de3db7.png" target="_blank" rel="noopener">bf0e887dec06ea62dbad0673fe4b2730</a></p>
<p><strong>2、EmpMapper.xml文件配置如下:</strong></p>
<p><code>EmpMapper文件头信息如下：</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">	<span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	不同Mapper文件的namespace值应该保证唯一</span></span><br><span class="line"><span class="comment">	在程序中通过[ namespace + id ]定位到要执行哪一条SQL语句</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>EmpMapper文件详细配置如下：</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">	<span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	不同Mapper文件的namespace值应该保证唯一</span></span><br><span class="line"><span class="comment">	在程序中通过[ namespace + id ]定位到要执行哪一条SQL语句</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"EmpMapper"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 通过select、insert、update、delete标签声明要执行的SQL --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 练习1: 查询emp表中的所有员工信息</span></span><br><span class="line"><span class="comment">		resultType指定查询的结果将会封装到什么类型中</span></span><br><span class="line"><span class="comment">		即使最终返回的结果是集合(List&lt;Emp&gt;),resultType也只需要指定集合中的泛型即可!</span></span><br><span class="line"><span class="comment"> 	--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">		select * from emp</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="添加并编写Emp实体类"><a href="#添加并编写Emp实体类" class="headerlink" title="添加并编写Emp实体类"></a>添加并编写Emp实体类</h3><p>注意：在当前实例中，Emp类中的属性和数据库表的字段名称必须一致，否则将会无法将结果集封装到Java对象中。</p>
<p>在src/main/java目录下创建 com.tedu.pojo.Emp类，并编辑Emp类：提供私有属性以及对应的getter方法、setter方法，并重写toString方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tedu.pojo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实体类,用于封装Emp表中的一条用户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emp</span> </span>&#123;</span><br><span class="line">	<span class="comment">//1.声明实体类中的属性</span></span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String job;</span><br><span class="line">	<span class="keyword">private</span> Double salary;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//2.提供对应的getter和setter方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getJob</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> job;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJob</span><span class="params">(String job)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.job = job;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Double <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> salary;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(Double salary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//3.重写toString方法</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Emp [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">", job="</span> + job + <span class="string">", salary="</span> + salary + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现测试类-并测试"><a href="#实现测试类-并测试" class="headerlink" title="实现测试类,并测试"></a>实现测试类,并测试</h3><p><strong>1、实现findAll方法，代码如下：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习1(快速入门):  查询emp表中的所有员工, 返回一个List&lt;Emp&gt;集合</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IOException */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">findAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">	<span class="comment">//1.读取mybatis的核心配置文件(mybatis-config.xml)</span></span><br><span class="line">	InputStream in = Resources</span><br><span class="line">			.getResourceAsStream(<span class="string">"mybatis-config.xml"</span>);</span><br><span class="line">	<span class="comment">//2.通过配置信息获取一个SqlSessionFactory工厂对象</span></span><br><span class="line">	SqlSessionFactory fac = </span><br><span class="line">			<span class="keyword">new</span> SqlSessionFactoryBuilder().build( in );</span><br><span class="line">	<span class="comment">//3.通过工厂获取一个SqlSession对象</span></span><br><span class="line">	SqlSession session = fac.openSession();</span><br><span class="line">	<span class="comment">//4.通过namespace+id找到要执行的sql语句并执行sql语句</span></span><br><span class="line">	List&lt;Emp&gt; list = session</span><br><span class="line">			.selectList(<span class="string">"EmpMapper.findAll"</span>);</span><br><span class="line">	<span class="comment">//5.输出结果</span></span><br><span class="line">	<span class="keyword">for</span>(Emp e : list) &#123;</span><br><span class="line">		System.out.println( e );</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、执行findAll方法，输出结果为：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Emp [id&#x3D;1, name&#x3D;王海涛, job&#x3D;程序员, salary&#x3D;3300.0]</span><br><span class="line">Emp [id&#x3D;2, name&#x3D;齐雷, job&#x3D;程序员, salary&#x3D;2800.0]</span><br><span class="line">Emp [id&#x3D;3, name&#x3D;刘沛霞, job&#x3D;程序员鼓励师, salary&#x3D;2700.0]</span><br><span class="line">Emp [id&#x3D;4, name&#x3D;陈子枢, job&#x3D;部门总监, salary&#x3D;4200.0]</span><br><span class="line">Emp [id&#x3D;5, name&#x3D;刘昱江, job&#x3D;程序员, salary&#x3D;3000.0]</span><br><span class="line">Emp [id&#x3D;6, name&#x3D;董长春, job&#x3D;程序员, salary&#x3D;3500.0]</span><br><span class="line">Emp [id&#x3D;7, name&#x3D;苍老师, job&#x3D;程序员, salary&#x3D;3700.0]</span><br><span class="line">Emp [id&#x3D;8, name&#x3D;韩少云, job&#x3D;CEO, salary&#x3D;5000.0]</span><br></pre></td></tr></table></figure>

<h2 id="MyBatis入门细节"><a href="#MyBatis入门细节" class="headerlink" title="MyBatis入门细节"></a>MyBatis入门细节</h2><h3 id="mybatis-config-xml配置文件"><a href="#mybatis-config-xml配置文件" class="headerlink" title="mybatis-config.xml配置文件"></a>mybatis-config.xml配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">    <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">    <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!-- MyBatis的全局配置文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> &gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 1.配置环境，可配置多个环境（比如：develop开发、test测试） --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"develop"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"develop"</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">&lt;!-- 1.1.配置事务管理方式：JDBC/MANAGED</span></span><br><span class="line"><span class="comment">			JDBC：将事务交给JDBC管理（推荐）</span></span><br><span class="line"><span class="comment">			MANAGED：自己管理事务</span></span><br><span class="line"><span class="comment">			  --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">			</span><br><span class="line">			<span class="comment">&lt;!-- 1.2.配置数据源，即连接池 JNDI/POOLED/UNPOOLED</span></span><br><span class="line"><span class="comment">				JNDI：已过时</span></span><br><span class="line"><span class="comment">				POOLED：使用连接池（推荐）</span></span><br><span class="line"><span class="comment">				UNPOOLED：不使用连接池</span></span><br><span class="line"><span class="comment">			 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/yonghedb?characterEncoding=utf-8"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"root"</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- 2.导入Mapper配置文件，如果mapper文件有多个，可以通过多个mapper标签导入 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"EmpMapper.xml"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>environments</code>标签：该标签内部可以配置多个environment，即多种环境，每种环境可以做不同配置或连接不同数据库。例如，开发、测试、生产环境可能需要不同的配置，连接的数据库可能也不相同，因此我们可以配置三个environment，分别对应上面三种不同的环境。</p>
<p>但是要记住，environment可以配置多个，但是最终要使用的只能是其中一个！</p>
<p><code>environment</code>标签：内部可以配置多种配置信息，下面介绍事务管理配置和数据源配置。</p>
<p><code>transactionManage</code>标签：事务管理配置，mybatis中有两种事务管理方式，也就是</p>
<p>type=”[JDBC|MANAGED]。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JDBC：这个配置就是直接使用了 JDBC的提交和回滚设置，它依赖于从数据源得到的连接来管理事务范围。推荐使用。</span><br><span class="line">MANAGED：这个配置几乎没做什么。它从来不提交或回滚一个连接。需要自己手动添加并管理。不推荐使用。</span><br></pre></td></tr></table></figure>

<p><code>dataSource</code>标签：数据源，也就是连接池配置。这里type指定数据源类型，有三种内建的类型：JNDI、POOLED、UNPOOLED</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JNDI：已过时，不推荐使用！</span><br><span class="line">POOLED：使用连接池，mybatis会创建连接池，并从连接池中获取连接访问数据库，在操作完成后，将会把连接返回连池。</span><br><span class="line">UNPOOLED：不使用连接池，该方式适用于只有小规模数量并发用户的简单应用程序上。</span><br></pre></td></tr></table></figure>

<p><code>mappers</code>标签：用于导入mapper文件的位置，其中可以配置多个mapper，即可以导入多个mapper文件。</p>
<h3 id="EmpMapper-xml配置文件"><a href="#EmpMapper-xml配置文件" class="headerlink" title="EmpMapper.xml配置文件"></a>EmpMapper.xml配置文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">	<span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">	<span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">	不同Mapper文件的namespace值应该保证唯一</span></span><br><span class="line"><span class="comment">	在程序中通过[ namespace + id ]定位到要执行哪一条SQL语句</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"EmpMapper"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 通过select、insert、update、delete标签声明要执行的SQL --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- 练习1: 查询emp表中的所有员工信息</span></span><br><span class="line"><span class="comment">		resultType指定查询的结果将会封装到什么类型中</span></span><br><span class="line"><span class="comment">		即使最终返回的结果是集合(List&lt;Emp&gt;),resultType也只需要指定集合中的泛型即可!</span></span><br><span class="line"><span class="comment"> 	--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">		select * from emp</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>(1)第1行是xml的文档声明，用于声明xml的版本和编码</p>
<p>(2)第2、3、4行，引入了xml约束文档，当前xml文档将会按照mybatis-3-mapper.dtd文件所要求的规则进行书写。</p>
<p>(3)Mapper标签：根标签，其中namespace(名称空间，也叫命名空间)，要求不能重复。在程序中通过【namespace + id 】定位到要执行哪一条SQL语句</p>
<p>(4)select标签：用于指定将来要执行的各种SQL语句。标签上可以声明属性，下面介绍常用的属性：id、resultType、resultMap</p>
<ul>
<li><p>id属性：要求值不能重复。将来在执行SQL时，可以通过【namespace + id】找到指定SQL并执行。</p>
</li>
<li><p>resultType属性：从这条SQL语句中返回所期望类型的类的完全限定名称（包名+类名）。注意如果是集合情形，那应该是集合可以包含的类型，而不能是集合本身。</p>
<p>简而言之，resultType控制查询SQL执行后返回值的类型或集合中的泛型，例如查询emp表中的单条记录，返回值是一个Emp对象，因此，resultType=”com.tedu.pojo.Emp”；</p>
<p>如果查询emp表中的多条记录，返回值是一个List，此时resultType的值应该集合中的泛型，因此resultType=”com.tedu.pojo.Emp”；</p>
</li>
<li><p>resultMap属性：复杂对象结构（例如多表关联查询等）。 使用 resultType 或 resultMap，但不能同时使用。</p>
</li>
</ul>
<h2 id="MyBatis增删改查"><a href="#MyBatis增删改查" class="headerlink" title="MyBatis增删改查"></a>MyBatis增删改查</h2><h3 id="新增员工"><a href="#新增员工" class="headerlink" title="新增员工"></a>新增员工</h3><p><strong>1、编辑EmpMapper.xml文件, 添加新增员工对应的sql.</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习2: 新增员工信息: 赵云 保安 6000</span></span><br><span class="line"><span class="comment">增删改的标签上不用指定resultType, 因为返回值都是int类型</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"insert"</span> &gt;</span></span><br><span class="line">	insert into emp value(null, '赵云', '保安', 6000)</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2、编写TestMybatis类，添加testInsert方法，实现新增员工操作。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习2: 新增员工信息: 赵云 保安 6000 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//执行sql语句, 返回执行结果</span></span><br><span class="line">  <span class="keyword">int</span> rows = session.update(<span class="string">"EmpMapper.insert"</span>);</span><br><span class="line">  <span class="comment">//提交事务</span></span><br><span class="line">  session.commit();</span><br><span class="line">  System.out.println(<span class="string">"影响的行数: "</span>+rows);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改员工"><a href="#修改员工" class="headerlink" title="修改员工"></a>修改员工</h3><p><strong>1、编辑EmpMapper.xml文件, 添加新增员工对应的sql。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习3：修改员工信息：赵云 保镖 20000 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"update"</span>&gt;</span></span><br><span class="line">	update emp set job='保镖', salary=20000 where name='赵云'</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2、编写TestMybatis类，添加testUpdate方法，实现修改员工信息。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习3: 修改员工信息, 将赵云的job改为'保镖'，salary改为20000 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//执行sql语句, 返回执行结果</span></span><br><span class="line">  <span class="keyword">int</span> rows = session.update(<span class="string">"EmpMapper.update"</span>);</span><br><span class="line">  <span class="comment">//提交事务</span></span><br><span class="line">  session.commit();</span><br><span class="line">  System.out.println(<span class="string">"影响行数:"</span>+rows);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="删除员工"><a href="#删除员工" class="headerlink" title="删除员工"></a>删除员工</h3><p><strong>1、编辑EmpMapper.xml文件, 添加新增员工对应的sql。</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习4: 删除name为'赵云'的记录 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"delete"</span>&gt;</span></span><br><span class="line">	delete from emp where name='赵云'</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2、编写TestMybatis类，添加</strong>testDelete<strong>方法，实现删除员工。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习4: 删除name为'赵云'的记录 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//执行sql语句, 返回执行结果</span></span><br><span class="line">  <span class="keyword">int</span> rows = session.update(<span class="string">"EmpMapper.delete"</span>);</span><br><span class="line">  <span class="comment">//提交事务</span></span><br><span class="line">  session.commit();</span><br><span class="line">  System.out.println(<span class="string">"影响行数:"</span>+rows);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="mybatis中的占位符"><a href="#mybatis中的占位符" class="headerlink" title="mybatis中的占位符"></a>mybatis中的占位符</h2><h3 id="占位符"><a href="#占位符" class="headerlink" title="#{}占位符"></a>#{}占位符</h3><p>在上面的增删改查操作中，SQL语句中的值是写死在SQL语句中的，而在实际开发中，此处的值往往是用户提交过来的值，因此这里我们需要将SQL中写死的值替换为占位符。</p>
<p>在mybatis中占位符有两个，分别是 <code>#{}</code> 占位符 和 <code>${}</code> 占位符：</p>
<ul>
<li><p><code>#{}：</code>相当于JDBC中的问号（?）占位符,是为SQL语句中的参数值进行占位,大部分情况下都是使用#{}占位符; 并且当#{}占位符是为字符串或者日期类型的值进行占位时,在参数值传过来替换占位符的同时,会进行转义处理(在字符串或日期类型的值的两边加上单引号)</p>
</li>
<li><p><code>${}</code>：是为SQL片段进行占位，将传过来的SQL片段直接拼接在${}占位符所在的位置,不会进行任何的转义处理。（由于是直接将参数拼接在SQL语句中，因此可能会引发SQL注入攻击问题）</p>
</li>
</ul>
<p><strong>练习5：查询emp表中指定id的员工信息</strong></p>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习5: 查询emp表中指定id的员工信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">	select * from emp where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习5: 查询emp表中指定id的员工信息 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindById</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//执行sql语句, 返回执行结果</span></span><br><span class="line">  Emp emp = session.selectOne( <span class="string">"EmpMapper.findById"</span>, <span class="number">1</span> );</span><br><span class="line">  System.out.println( emp );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习6：新增员工信息: 张飞 Java开发工程师 15000</strong></p>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习6: 新增员工信息: 张飞 Java开发工程师 15000</span></span><br><span class="line"><span class="comment">  如果通过map集合传输参数, 需要保证占位符中的变量名</span></span><br><span class="line"><span class="comment">  和map集合中的key保持一致</span></span><br><span class="line"><span class="comment">  如果通过pojo对象传输参数, 需要保证占位符中的变量名</span></span><br><span class="line"><span class="comment">  和对象中的属性名保持一致, 或者在pojo中有对应的</span></span><br><span class="line"><span class="comment">  getXxx方法</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"insert2"</span>&gt;</span></span><br><span class="line">	insert into emp values (null, #&#123;name&#125;, #&#123;job&#125;, #&#123;salary&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习6: 新增员工信息: 张飞 Java开发工程师 15000 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInsert2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//将要传输的参数封装到map集合中</span></span><br><span class="line">  <span class="comment">//Map map = new HashMap();</span></span><br><span class="line">  <span class="comment">//map.put("name", "张飞");</span></span><br><span class="line">  <span class="comment">//map.put("job", "Java开发工程师");</span></span><br><span class="line">  <span class="comment">//map.put("salary", 15000);</span></span><br><span class="line">  <span class="comment">//也可以将要传输的参数封装到Emp对象中</span></span><br><span class="line">  Emp emp = <span class="keyword">new</span> Emp();</span><br><span class="line">  emp.setName(<span class="string">"关羽123"</span>);</span><br><span class="line">  emp.setJob(<span class="string">"保安"</span>);</span><br><span class="line">  emp.setSalary(<span class="number">8000.0</span>);</span><br><span class="line">  <span class="comment">//执行sql语句</span></span><br><span class="line">  intsession rows = session.update(<span class="string">"EmpMapper.insert2"</span>, emp);</span><br><span class="line">  <span class="comment">//提交事务</span></span><br><span class="line">  session.commit();</span><br><span class="line">  System.out.println( <span class="string">"影响的行数: "</span>+rows );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习7：修改员工信息: 张飞 架构师 25000</strong></p>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习7: 修改员工信息: 张飞 架构师 25000 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"update2"</span>&gt;</span></span><br><span class="line">  update emp set job=#&#123;job&#125;, salary=#&#123;salary&#125;</span><br><span class="line">  where name=#&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习7: 修改员工信息: 张飞 架构师 25000 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdate2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//将参数封装到Emp对象中</span></span><br><span class="line">  Emp emp = <span class="keyword">new</span> Emp();</span><br><span class="line">  emp.setName(<span class="string">"张飞"</span>);</span><br><span class="line">  emp.setJob(<span class="string">"架构师"</span>);</span><br><span class="line">  emp.setSalary(<span class="number">25000.0</span>);</span><br><span class="line">  <span class="comment">//执行sql语句</span></span><br><span class="line">  intsession rows = session.update(<span class="string">"EmpMapper.update2"</span>, emp);</span><br><span class="line">  <span class="comment">//提交事务</span></span><br><span class="line">  session.commit();</span><br><span class="line">  System.out.println(<span class="string">"影响的行数: "</span>+rows);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习8：删除emp表中指定id的员工信息</strong></p>
<p>mapper文件配置:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习8：删除emp表中指定id的员工信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"delete2"</span> <span class="attr">parameterType</span>=<span class="string">"String"</span>&gt;</span></span><br><span class="line">	delete from emp where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>java代码示例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  练习8：删除emp表中指定id的员工信息 */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDelete2</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">  ......</span><br><span class="line">  <span class="comment">//执行SQL语句</span></span><br><span class="line">  <span class="keyword">int</span> rows = session.delete(<span class="string">"EmpMapper.delete2"</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="comment">//提交事务</span></span><br><span class="line">  session.commit();</span><br><span class="line">  System.out.println(<span class="string">"影响行数:"</span>+rows);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在上面的增删改查练习中，当SQL语句中包含的参数值是传递过来的，在SQL语句中我们会通过<code>#{}</code>占位符进行占位，在SQL语句真正执行时，再将传递过来的值替换SQL语句中的占位符。</p>
<p>其实，<code>#{}</code>就是JDBC中的问号（<strong>?</strong>）占位符，因此为了安全考虑，在执行时会对传递过来的字符串和日期类型高的值进行转译处理。</p>
<p>例如：查询指定name的员工信息，SQL语句为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">name</span>=<span class="comment">#&#123;name&#125;</span></span><br></pre></td></tr></table></figure>

<p>其实就等价于JDBC中： <code>select * from emp where name=?</code>，</p>
<p>如果传过来的参数值为：王海涛，那么最终执行的SQL语句为：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在参数替换占位符的同时进行了转义处理(在值的两边加上了单引号)</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">name</span>=<span class="string">'王海涛'</span></span><br></pre></td></tr></table></figure>

<h3 id="占位符-1"><a href="#占位符-1" class="headerlink" title="${}占位符"></a>${}占位符</h3><p>那么如果我们在传递的时候不是一个参数值，而是一个SQL片段呢？</p>
<p>例如：在查询时，我们想动态的传递查询的列：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="comment">#&#123;columns&#125; from emp</span></span><br></pre></td></tr></table></figure>

<p>此时传递过来的应该是一个SQL片段，不同于上面的参数值，如果此时还用<code>#{}</code>，也会像上面一样被转译处理：<code>select &#39;id,name,job&#39; from emp</code>，这不是我们希望看到的！</p>
<p>如果不想让传过来的SQL片段被转译处理，而是直接拼接在SQL语句中，那么这里可以使用<code>${}</code>，例如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> $&#123;<span class="keyword">columns</span>&#125; <span class="keyword">from</span> emp</span><br></pre></td></tr></table></figure>

<p>拼接之后：<code>select id,name,job from emp</code></p>
<p><strong>练习9：动态指定要查询的列</strong></p>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习9: 动态指定要查询的列 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll2"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">	select $&#123;cols&#125; from emp</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>java代码示例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 练习9: 动态指定要查询的列 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">  <span class="comment">//map.put("cols", "id, name");</span></span><br><span class="line">  <span class="comment">//map.put("cols", "id, name, salary");</span></span><br><span class="line">  map.put(<span class="string">"cols"</span>, <span class="string">"id,name,job,salary"</span>);</span><br><span class="line">  <span class="comment">//执行sql语句, 返回结果</span></span><br><span class="line">  List&lt;Emp&gt; list = session.selectList(<span class="string">"EmpMapper.findAll2"</span>, map);</span><br><span class="line">  <span class="comment">//输出结果</span></span><br><span class="line">  <span class="keyword">for</span> ( Emp e : list ) &#123;</span><br><span class="line">  	System.out.println( e );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例2: 根据name模糊查询emp表</strong></p>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习10: 根据name模糊查询emp表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll3"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">  select * from emp</span><br><span class="line">  where name like '%$&#123;name&#125;%'</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习11: 根据name模糊查询emp表 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll4"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">  select * from emp</span><br><span class="line">  where name like #&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 练习10: 根据name模糊查询emp表</span></span><br><span class="line"><span class="comment"> * '%王%' '%刘%'</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//将参数封装到map集合中</span></span><br><span class="line">  Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">  map.put(<span class="string">"name"</span>, <span class="string">"涛"</span>);</span><br><span class="line">  <span class="comment">//执行sql, 返回结果</span></span><br><span class="line">  List&lt;Emp&gt; list = session.selectList(<span class="string">"EmpMapper.findAll3"</span>, map);</span><br><span class="line">  <span class="comment">//输出结果</span></span><br><span class="line">  <span class="keyword">for</span> (Emp emp : list) &#123;</span><br><span class="line">  	System.out.println( emp );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 练习11: 根据name模糊查询emp表</span></span><br><span class="line"><span class="comment"> * '%王%' '%刘%'</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll4</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//将参数封装到map集合中</span></span><br><span class="line">  Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">  map.put(<span class="string">"name"</span>, <span class="string">"%刘%"</span>);</span><br><span class="line">  <span class="comment">//执行sql, 返回结果</span></span><br><span class="line">  List&lt;Emp&gt; list = session.selectList(<span class="string">"EmpMapper.findAll4"</span>, map);</span><br><span class="line">  <span class="comment">//输出结果</span></span><br><span class="line">  <span class="keyword">for</span> (Emp emp : list) &#123;</span><br><span class="line">  	System.out.println( emp );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>需要注意的是，在传递 <code>${}</code> 对应的值时，即使只有一个参数，也需要将值存入<strong>map</strong>集合中！！</p>
<p>总结：在大多数情况下还是使用#{}占位符，而${}多用于为SQL片段进行占位！</p>
<h2 id="动态SQL标签"><a href="#动态SQL标签" class="headerlink" title="动态SQL标签"></a>动态SQL标签</h2><h3 id="if、where标签"><a href="#if、where标签" class="headerlink" title="if、where标签"></a>if、where标签</h3><ul>
<li><p><code>&lt;if&gt;</code>标签：是根据<code>test属性</code>中的布尔表达式的值，从而决定是否执行包含在其中的SQL片段。如果判断结果为true，则执行其中的SQL片段；如果结果为false，则不执行其中的SQL片段</p>
</li>
<li><p><code>&lt;where&gt;</code>标签：用于对包含在其中的SQL片段进行检索，在需要时可以生成where关键字，并且在需要时会剔除多余的连接词（比如and或者or）</p>
</li>
</ul>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/f06a2a2de234a540b189b15d65943989-eb68759a231843fa9d43a07c9c7363c6.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-f50f6006b7c7da84f00abe26ef094214.png" alt="f06a2a2de234a540b189b15d65943989"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/f06a2a2de234a540b189b15d65943989-eb68759a231843fa9d43a07c9c7363c6.png" target="_blank" rel="noopener">f06a2a2de234a540b189b15d65943989</a></p>
<p><strong>练习12：根据薪资查询员工信息（if标签）</strong></p>
<ul>
<li><code>&lt;if&gt;</code>标签：是根据<code>test属性</code>中的布尔表达式的值，从而决定是否执行包含在其中的SQL片段。如果判断结果为true，则执行其中的SQL片段；如果结果为false，则不执行其中的SQL片段</li>
</ul>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习12: 根据薪资查询员工信息</span></span><br><span class="line"><span class="comment">* 如果没有参数, 则不执行where子句, 默认查询所有员工：</span></span><br><span class="line"><span class="comment">* 	select * from emp</span></span><br><span class="line"><span class="comment">* 如果参数中只有minSal(即minSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &gt; minSal</span></span><br><span class="line"><span class="comment">* 如果参数中只有maxSal(即maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &lt; maxSal</span></span><br><span class="line"><span class="comment">* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">*		... where salary &gt; minSal and salary &lt; maxSal  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllBySal"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">  select * from emp</span><br><span class="line">  where 1=1</span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"minSal != null"</span>&gt;</span></span><br><span class="line">  	and salary&gt;#&#123;minSal&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"maxSal != null"</span>&gt;</span></span><br><span class="line">  	and salary &lt;![CDATA[ &lt; ]]&gt; #&#123;maxSal&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 练习12: 根据薪资查询员工信息</span></span><br><span class="line"><span class="comment">* 如果没有参数, 则不执行where子句, 默认查询所有员工：</span></span><br><span class="line"><span class="comment">* 	select * from emp</span></span><br><span class="line"><span class="comment">* 如果参数中只有minSal(即minSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &gt; minSal</span></span><br><span class="line"><span class="comment">* 如果参数中只有maxSal(即maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &lt; maxSal</span></span><br><span class="line"><span class="comment">* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">*	... where salary &gt; minSal and salary &lt; maxSal  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindBySal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">	<span class="comment">//map.put( "minSal" , 3000 );</span></span><br><span class="line">	<span class="comment">//map.put( "maxSal", 4000 );</span></span><br><span class="line">	List&lt;Emp&gt; list = session.selectList( <span class="string">"EmpMapper.findBySal"</span>, map );</span><br><span class="line">	<span class="keyword">for</span> (Emp emp : list) &#123;</span><br><span class="line">		System.out.println( emp );</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习13：根据薪资查询员工信息(where标签)</strong></p>
<ul>
<li><code>&lt;where&gt;</code>标签：用于对包含在其中的SQL片段进行检索，在需要时可以生成where关键字，并且在需要时会剔除多余的连接词（比如and或者or）</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习13: 根据薪资查询员工信息</span></span><br><span class="line"><span class="comment">* 如果没有参数, 则不执行where子句, 默认查询所有员工：</span></span><br><span class="line"><span class="comment">* 	select * from emp</span></span><br><span class="line"><span class="comment">* 如果参数中只有minSal(即minSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &gt; minSal</span></span><br><span class="line"><span class="comment">* 如果参数中只有maxSal(即maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &lt; maxSal</span></span><br><span class="line"><span class="comment">* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">*		... where salary &gt; minSal and salary &lt; maxSal  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAllBySal2"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">  select * from emp</span><br><span class="line">  <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"minSal != null"</span>&gt;</span></span><br><span class="line">    	and salary&gt;#&#123;minSal&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"maxSal != null"</span>&gt;</span></span><br><span class="line">    	and salary &lt;![CDATA[ &lt; ]]&gt; #&#123;maxSal&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 练习13: 根据薪资查询员工信息</span></span><br><span class="line"><span class="comment">* 如果没有参数, 则不执行where子句, 默认查询所有员工：</span></span><br><span class="line"><span class="comment">* 	select * from emp</span></span><br><span class="line"><span class="comment">* 如果参数中只有minSal(即minSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &gt; minSal</span></span><br><span class="line"><span class="comment">* 如果参数中只有maxSal(即maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">* 	... where salary &lt; maxSal</span></span><br><span class="line"><span class="comment">* 如果参数有 minSal、maxSal(即minSal、maxSal不为null), 则：</span></span><br><span class="line"><span class="comment">*	... where salary &gt; minSal and salary &lt; maxSal  */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAllBySal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="comment">//封装参数到map集合中</span></span><br><span class="line">  Map map = <span class="keyword">new</span> HashMap();</span><br><span class="line">  map.put(<span class="string">"minSal"</span>, <span class="number">3000</span>);</span><br><span class="line">  map.put(<span class="string">"maxSal"</span>, <span class="number">4000.0</span>);</span><br><span class="line">  List&lt;Emp&gt; list = session.selectList(<span class="string">"EmpMapper.findAllBySal2"</span>, map);</span><br><span class="line">  <span class="keyword">for</span> (Emp emp : list) &#123;</span><br><span class="line">  	System.out.println( emp );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="foreach元素"><a href="#foreach元素" class="headerlink" title="foreach元素"></a>foreach元素</h3><p>foreach标签：可以对传过来的参数数组或集合进行遍历，以下是foreach标签上的各个属性介绍：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>属性描述</th>
</tr>
</thead>
<tbody><tr>
<td>collection</td>
<td>必需，值为遍历的集合类型，例如：如果参数只是一个数组或List集合，则collection的值为array或list；如果传的是多个参数，用map封装，collection则指定为map中的key。</td>
</tr>
<tr>
<td>item</td>
<td>必需，若collection为数组或List集合时，item表示其中的元素，若collection为map中的key，item表示map中value（集合或数组）中的元素</td>
</tr>
<tr>
<td>open</td>
<td>可选，表示遍历生成的SQL片段以什么开始，最常用的是左括号’(‘</td>
</tr>
<tr>
<td>close</td>
<td>可选，表示遍历生成的SQL片段以什么结束，最常用的是右括号’)’</td>
</tr>
<tr>
<td>separator</td>
<td>可选，每次遍历后给生成的SQL片段后面指定间隔符</td>
</tr>
</tbody></table>
<p><strong>练习14: 根据员工的id批量删除员工信息</strong></p>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习14: 根据员工的id批量删除员工信息</span></span><br><span class="line"><span class="comment">	delete from emp where id in (1,3,5,7)</span></span><br><span class="line"><span class="comment">	collection: 如果传的参数仅仅是一个数组或者List集合, collection可以指定为</span></span><br><span class="line"><span class="comment">		array或list; 如果传的是多个参数，用map封装，collection则指定为map中的key</span></span><br><span class="line"><span class="comment">	open: 指定生成的SQL片段以什么符号开始</span></span><br><span class="line"><span class="comment">	close: 指定生成的SQL片段以什么符号结束</span></span><br><span class="line"><span class="comment">	item: 指定变量接收数组或集合中的元素</span></span><br><span class="line"><span class="comment">	separator: 指定一个间隔符, 在将数组或集合中的每个元素拼接到SQL片段之后, </span></span><br><span class="line"><span class="comment">		在后面拼接一个间隔符</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteByIds"</span>&gt;</span></span><br><span class="line">	delete from emp where id in</span><br><span class="line">	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"array"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">		#&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 练习14: 根据员工的id批量删除员工信息 */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testDeleteByIds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//获取所要删除的员工的id数组</span></span><br><span class="line">	Integer[] ids = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> rows = session.delete( <span class="string">"EmpMapper.deleteByIds"</span>, ids );</span><br><span class="line">	System.out.println( <span class="string">"影响行数: "</span>+rows );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习15：根据员工的id批量更新员工信息</strong></p>
<p>在mapper文件中编写SQL语句：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习15: 根据员工的id批量更新员工信息</span></span><br><span class="line"><span class="comment"> 	将id为 2、4、6、8的员工的薪资在原有基础上增加1000</span></span><br><span class="line"><span class="comment"> 	update emp set salary=salary + 1000</span></span><br><span class="line"><span class="comment">	where id in(2,4,6,8);</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateByIds"</span>&gt;</span></span><br><span class="line">	update emp set salary=salary + #&#123;sal&#125;</span><br><span class="line">	where id in</span><br><span class="line">	<span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">"arrIds"</span> <span class="attr">open</span>=<span class="string">"("</span> <span class="attr">item</span>=<span class="string">"id"</span> <span class="attr">separator</span>=<span class="string">","</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">		#&#123;id&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Java代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 练习15: 根据员工的id批量更新员工信息</span></span><br><span class="line"><span class="comment"> * 将id为 2、4、6、8的员工的薪资在原有基础上增加1000</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateByIds</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Integer[] ids = &#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>&#125;; <span class="comment">//获取所要更新的员工的id数组</span></span><br><span class="line">	Double sal = <span class="number">1000.0</span>; <span class="comment">//要涨的薪资</span></span><br><span class="line">	<span class="comment">//传递的参数超过1个, 将参数封装到map集合中再传递</span></span><br><span class="line">	Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">	map.put( <span class="string">"arrIds"</span> , ids );</span><br><span class="line">	map.put( <span class="string">"sal"</span>, sal );</span><br><span class="line">	<span class="keyword">int</span> rows = session.update( <span class="string">"EmpMapper.updateByIds"</span>, map );</span><br><span class="line">	System.out.println( <span class="string">"影响行数: "</span>+rows );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面练习自己完成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 练习16：根据员工的id批量查询指定id的员工信息</span></span><br><span class="line"><span class="comment"> * 查询id为 2、4、6、8的员工的信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindByIds</span><span class="params">()</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Mapper接口开发"><a href="#Mapper接口开发" class="headerlink" title="Mapper接口开发"></a>Mapper接口开发</h2><h3 id="Mapper接口开发介绍"><a href="#Mapper接口开发介绍" class="headerlink" title="Mapper接口开发介绍"></a>Mapper接口开发介绍</h3><p>在上面的Mybatis案例中, 通过SqlSession对象调用方法进行增删改查操作时，方法中需要传入的第一个参数是一个字符串值，该值对应的内容为: (Mapper文件中的)namespace + id, 通过这种方式，找到Mapper文件中映射的SQL语句并执行!!</p>
<p>这种方式由于传入的是字符串值, 很容易发生字符串拼写错误且编译时期不会提示。</p>
<p>这里我们将会讲解比上面更加简单的方式，也是我们企业开发中最常用的方式，即使用mapper接口开发。使用mapper接口开发需要注意以下几点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、创建一个接口，接口的全路径名和mapper文件的namespace值要相同</span><br><span class="line">2、mapper文件中每条要执行的SQL语句，在接口中要添加一个对应的方法，并且接口中的方法名和SQL标签上的id值相同</span><br><span class="line">3、Mapper接口中方法接收的参数类型，和mapper.xml中定义的sql的接收的参数类型要相同</span><br><span class="line">4、接口中方法的返回值类型和SQL标签上的resultType即返回值类型相同(如果方法返回值是集合,resultType只需要指定集合中的泛型)</span><br></pre></td></tr></table></figure>

<h3 id="Mapper接口开发实现"><a href="#Mapper接口开发实现" class="headerlink" title="Mapper接口开发实现"></a>Mapper接口开发实现</h3><p>下面将使用mapper接口开发的方式，实现根据id查询指定的员工信息</p>
<p><strong>1、创建com.tedu.dao.EmpMapper接口</strong></p>
<p>由于接口的全路径名(com.tedu.dao.EmpMapper)要和EmpMapper.xml的namespace值保持一致，因此, 这里将namespace的值改为com.tedu.dao.EmpMapper：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.tedu.dao.EmpMapper"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>2、在接口中提供findById方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 根据id查询员工信息</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> Emp</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Emp <span class="title">findById</span><span class="params">(Integer id)</span></span>;</span><br></pre></td></tr></table></figure>

<p>注意:方法的名字要和映射的sql标签的id值保持一致</p>
<p>方法的返回值类型和resultType的类型要一致</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.查询：查询Emp表中指定id的员工信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findById"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">	select * from emp where id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3、提供实现类，测试Emp接口中的根据id查询员工的方法</strong></p>
<p>(1)创建com.tedu.test.TestMybatisInf类, 并提供testFindById方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMybatisInf</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindById</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4、实现testFindById方法并测试</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindById</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">  ......</span><br><span class="line">  <span class="comment">//3.获取Mapper接口对象</span></span><br><span class="line">  EmpMapper map = session.getMapper(EmpMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  <span class="comment">//4.调用接口对象的方法进行查询</span></span><br><span class="line">  Emp e = map.findById(<span class="number">2</span>);</span><br><span class="line">  <span class="comment">//5.输出结果</span></span><br><span class="line">  System.out.println(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5、在接口中提供findAll方法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 查询所有的员工信息</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> List&lt;Emp&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title">findAll</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>注意:方法的名字要和映射的sql标签的id值保持一致</p>
<p>方法的返回值类型和resultType的类型要一致, 例如:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 2.查询Emp表中所有员工的信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findAll"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">	select * from emp</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>6、提供实现类，测试Emp接口中的查询所有员工的方法</strong></p>
<p>(1)创建com.tedu.test.TestMybatisInf类, 并提供testFindAll方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMybatisInf</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span> <span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>实现testFindAll方法并测试</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">//3.获取Mapper接口对象</span></span><br><span class="line">  EmpMapper map = session.getMapper(EmpMapper<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">  <span class="comment">//4.调用接口对象的方法进行查询</span></span><br><span class="line">  List&lt;Emp&gt; list = map.findAll();</span><br><span class="line">  <span class="comment">//5.输出结果</span></span><br><span class="line">  <span class="keyword">for</span> (Emp e : list) &#123;</span><br><span class="line">  	System.out.println(e);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="几个可以优化的地方"><a href="#几个可以优化的地方" class="headerlink" title="几个可以优化的地方"></a>几个可以优化的地方</h2><h3 id="加入log4j日志框架"><a href="#加入log4j日志框架" class="headerlink" title="加入log4j日志框架"></a>加入log4j日志框架</h3><p>在项目中加入log4j的配置文件，用于打印日志信息，便于开发调试。</p>
<p>在src（或相似的目录）下创建log4j.properties如下：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Global logging configuration</span></span><br><span class="line"><span class="meta">log4j.rootLogger</span>=<span class="string">DEBUG, stdout</span></span><br><span class="line"><span class="comment"># Console output...</span></span><br><span class="line"><span class="meta">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="meta">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%5p [%t] - %m%n</span></span><br></pre></td></tr></table></figure>

<p>mybatis默认使用log4j作为输出日志信息。</p>
<p>只要将该文件放在指定的位置，log4j工具会自动到指定位置加载上述文件，读取文件中的配置信息并使用！</p>
<h3 id="SQL语句中的特殊符号"><a href="#SQL语句中的特殊符号" class="headerlink" title="SQL语句中的特殊符号"></a>SQL语句中的特殊符号</h3><p><strong>示例：添加一个查询功能：查询薪资小于3500的所有员工。</strong></p>
<p>1、编辑EmpMapper.xml文件, 添加查询对应的sql.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 练习12: 根据薪资查询员工信息 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findBySal"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">	select * from emp</span><br><span class="line">	where 2=2 </span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"minSal != null"</span>&gt;</span></span><br><span class="line">		and salary &gt;= #&#123;minSal&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"maxSal != null"</span>&gt;</span></span><br><span class="line">		and salary <span class="tag">&lt;<span class="name">=</span> #&#123;<span class="attr">maxSal</span>&#125;</span></span><br><span class="line">	&lt;/if&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、但在书写完后，xml文件提示有错误：</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/image-20200407172154514-eb86f89feeb547af8a44ee3e6c438920.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-584a65a0940df9728034f7df216dc7dc.png" alt="image-20200407172154514"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/image-20200407172154514-eb86f89feeb547af8a44ee3e6c438920.png" target="_blank" rel="noopener">image-20200407172154514</a></p>
<p>原来，小于号（&lt;）在xml文件中是特殊字符，被xml文件当成了标签的开始符号。</p>
<p>3、解决方法：可以使用 <code>&amp;lt;</code>代替 <code>&lt;</code>，例如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findBySal"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">	select * from emp</span><br><span class="line">	where 2=2 </span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"minSal != null"</span>&gt;</span></span><br><span class="line">		and salary &gt;= #&#123;minSal&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"maxSal != null"</span>&gt;</span></span><br><span class="line">		and salary <span class="symbol">&amp;lt;</span>= #&#123;maxSal&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>或者是将特殊符号包含在CDATA区（ ）中，这是因为放在CDATA区中的内容，只会被xml解析器当作普通文本来处理。而不是被当成标签的一部分处理。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 查询薪资小于3500的所有员工 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findBySal"</span> <span class="attr">resultType</span>=<span class="string">"com.tedu.pojo.Emp"</span>&gt;</span></span><br><span class="line">	select * from emp</span><br><span class="line">	where 2=2 </span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"minSal != null"</span>&gt;</span></span><br><span class="line">		and salary &gt;= #&#123;minSal&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"maxSal != null"</span>&gt;</span></span><br><span class="line">		and salary &lt;![CDATA[ &lt;= ]]&gt; #&#123;maxSal&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="jdbc-properties文件"><a href="#jdbc-properties文件" class="headerlink" title="jdbc.properties文件"></a>jdbc.properties文件</h3><p>在开发中，通常我们会将连接数据库的配置信息单独放在一个properties文件中（方便管理和维护），<br>然后在MyBatis的mapper文件中引入properties文件的配置信息即可！</p>
<p><strong>1、在src目录下创建一个名称为jdbc.properties的文件</strong></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/c689eb39f8139c834ce014974d446229-bb4a05eb99f54138b3f31e9c58e3cf87.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-f27ee584566f3d30a1881384cb23508a.png" alt="c689eb39f8139c834ce014974d446229"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/c689eb39f8139c834ce014974d446229-bb4a05eb99f54138b3f31e9c58e3cf87.png" target="_blank" rel="noopener">c689eb39f8139c834ce014974d446229</a></p>
<p><strong>2、jdbc.properties文件内容如下:</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="meta">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/yonghedb?characterEncoding=utf-8</span></span><br><span class="line"><span class="meta">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>

<p><strong>3、在mybatis-config.xml文件中引入jdbc.properties文件</strong></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/7f967dea070cc2df6038dc0a11fcfc7e-e103b441cfcf4b59a6e96c16b8505607.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-7d734ed869da75c5c76629886495ab53.png" alt="7f967dea070cc2df6038dc0a11fcfc7e"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/7f967dea070cc2df6038dc0a11fcfc7e-e103b441cfcf4b59a6e96c16b8505607.png" target="_blank" rel="noopener">7f967dea070cc2df6038dc0a11fcfc7e</a></p>
<p>1、其中 <code>&lt;properties resource=&quot;jdbc.properties&quot;/&gt;</code>标签用于引入jdbc.properties文件，默认到classpath即类目录下寻找指定的文件；</p>
<p>2、properties标签上value属性中配置的 $：</p>
<p><code>${jdbc.driver}</code>：其实就是jdbc.properties文件中的 jdbc.driver的值，即：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure>

<p><code>${jdbc.url}</code>：其实就是jdbc.properties文件中的 jdbc.url的值，即：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;mybatisdb?characterEncoding&#x3D;utf-8</span><br></pre></td></tr></table></figure>

<p><code>${jdbc.username}</code>：其实就是jdbc.properties文件中的 jdbc.username的值，即：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root</span><br></pre></td></tr></table></figure>

<p><code>${jdbc.password}</code>：其实就是jdbc.properties文件中的 jdbc.password的值，即：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root</span><br></pre></td></tr></table></figure>

<h2 id="扩展内容"><a href="#扩展内容" class="headerlink" title="扩展内容"></a>扩展内容</h2><h3 id="Jdbc回顾"><a href="#Jdbc回顾" class="headerlink" title="Jdbc回顾"></a>Jdbc回顾</h3><p><em>通过JDBC查询Emp表中的所有记录，并封装到一个List集合中返回</em></p>
<p><strong>1、创建TestJdbc类，完成查询所有员工：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tedu.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.tedu.pojo.Emp;</span><br><span class="line"><span class="comment">/** Jdbc回顾 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJdbc</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">/* 查询emp表中的所有员工信息，将每个员工信息的封装到一个</span></span><br><span class="line"><span class="comment">		 * Emp对象中，再将封装了员工信息所有Emp对象存入List集合</span></span><br><span class="line"><span class="comment">		 * 中，并遍历输出所有的员工信息 </span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		List&lt;Emp&gt; empList = findAll();</span><br><span class="line">		<span class="keyword">for</span>(Emp emp : empList)&#123;</span><br><span class="line">			System.out.println(emp);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 查询emp表中的所有员工信息,封装到List集合并返回</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;Emp&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Connection conn = <span class="keyword">null</span>;</span><br><span class="line">		Statement stat = <span class="keyword">null</span>;</span><br><span class="line">		ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//1.注册数据库驱动</span></span><br><span class="line">			Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">			<span class="comment">//2.获取数据库连接(Connection)</span></span><br><span class="line">			conn = DriverManager.getConnection(</span><br><span class="line">					<span class="string">"jdbc:mysql:///yonghedb"</span>, </span><br><span class="line">					<span class="string">"root"</span>, <span class="string">"root"</span>);</span><br><span class="line">			<span class="comment">//3.获取传输器</span></span><br><span class="line">			stat = conn.createStatement();</span><br><span class="line">			<span class="comment">//4.利用传输器发送sql到数据库执行,并返回执行结果</span></span><br><span class="line">			String sql = <span class="string">"select * from emp"</span>;</span><br><span class="line">			rs = stat.executeQuery(sql);</span><br><span class="line">			<span class="comment">//5.处理结果</span></span><br><span class="line">			<span class="comment">//5.1.声明List集合,用于封装所有的员工信息</span></span><br><span class="line">			List&lt;Emp&gt; empList = <span class="keyword">new</span> ArrayList();</span><br><span class="line">			<span class="comment">//5.2.遍历ResultSet结果集</span></span><br><span class="line">			<span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">				<span class="comment">//5.3.获取结果集中的每一条员工信息</span></span><br><span class="line">				<span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</span><br><span class="line">				String name = rs.getString(<span class="string">"name"</span>);</span><br><span class="line">				String job = rs.getString(<span class="string">"job"</span>);</span><br><span class="line">				<span class="keyword">double</span> salary = rs.getDouble(<span class="string">"salary"</span>);</span><br><span class="line">				<span class="comment">//5.4.将每一条员工信息封装到一个Emp对象中</span></span><br><span class="line">				Emp emp = <span class="keyword">new</span> Emp();</span><br><span class="line">				emp.setId(id);</span><br><span class="line">				emp.setName(name);</span><br><span class="line">				emp.setJob(job);</span><br><span class="line">				emp.setSalary(salary);</span><br><span class="line">				<span class="comment">//5.5.将Emp对象存入List集合中</span></span><br><span class="line">				empList.add(emp);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> empList;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			System.out.println(<span class="string">"查询失败!"</span>);</span><br><span class="line">		&#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">			<span class="comment">//6.释放资源</span></span><br><span class="line">			<span class="keyword">if</span>(rs != <span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					rs.close();</span><br><span class="line">				&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">					rs = <span class="keyword">null</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(stat != <span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					stat.close();</span><br><span class="line">				&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">					stat = <span class="keyword">null</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					conn.close();</span><br><span class="line">				&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">					conn = <span class="keyword">null</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、声明Emp实体类，用于封装员工信息：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tedu.pojo;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实体类,用于封装Emp表中的一条用户信息</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Emp</span> </span>&#123;</span><br><span class="line">	<span class="comment">//1.声明实体类中的属性</span></span><br><span class="line">	<span class="keyword">private</span> Integer id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String job;</span><br><span class="line">	<span class="keyword">private</span> Double salary;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//2.提供对应的getter和setter方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getJob</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> job;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJob</span><span class="params">(String job)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.job = job;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Double <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> salary;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(Double salary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//3.重写toString方法</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Emp [id="</span> + id + <span class="string">", name="</span> + name + <span class="string">", job="</span> + job + <span class="string">", salary="</span> + salary + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="mybatis-config文件没有提示的解决办法"><a href="#mybatis-config文件没有提示的解决办法" class="headerlink" title="mybatis-config文件没有提示的解决办法"></a>mybatis-config文件没有提示的解决办法</h3><p>如果在没有网络(外网)的情况下，编写mybatis-config.xml文件没有提示，可以按照下面的步骤进行配置：</p>
<p>(1)找到mybatis-3-config.dtd的文件的位置，例如：</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/065e6b731aa74d5650821fdc63cbd4b9-a916b8fe6d80434da075b2c70213be5f.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-370d55e6e8b991ac89040032a7b32833.png" alt="065e6b731aa74d5650821fdc63cbd4b9"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/065e6b731aa74d5650821fdc63cbd4b9-a916b8fe6d80434da075b2c70213be5f.png" target="_blank" rel="noopener">065e6b731aa74d5650821fdc63cbd4b9</a></p>
<p>(2)复制下面的url地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd</span><br></pre></td></tr></table></figure>

<p>(3)在eclipse菜单栏中: window –&gt; Preferences –&gt; 在搜索框中搜索 [ xml ] XML –&gt; XML Catalog –&gt; User Specified Entries –&gt; Add…</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/eef68594c0d7b072e09702b3d6289831-da6604b74ae942c9a0e27565879c55a6.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-c630c3dad6bade32ffb34594d1e1934b.png" alt="eef68594c0d7b072e09702b3d6289831"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/eef68594c0d7b072e09702b3d6289831-da6604b74ae942c9a0e27565879c55a6.png" target="_blank" rel="noopener">eef68594c0d7b072e09702b3d6289831</a></p>
<p>(4)在弹出的窗口中:</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/364a97a96fcb74e6ca14d4a9c8b89e6b-671989c3b2f2458db7b49fe32a23d85d.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-1c33bab8ff1f359f0bea91f65ced15b8.png" alt="364a97a96fcb74e6ca14d4a9c8b89e6b"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/364a97a96fcb74e6ca14d4a9c8b89e6b-671989c3b2f2458db7b49fe32a23d85d.png" target="_blank" rel="noopener">364a97a96fcb74e6ca14d4a9c8b89e6b</a></p>
<h3 id="Mapper文件没有提示的解决办法"><a href="#Mapper文件没有提示的解决办法" class="headerlink" title="Mapper文件没有提示的解决办法"></a>Mapper文件没有提示的解决办法</h3><p>如果在没有网络(外网)的情况下，编写XxxMapper.xml文件没有提示，可以按照下面的步骤进行配置：</p>
<p>(1)找到mybatis-3-mapper.dtd的文件的位置，例如：</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/50f2e9357bd4d42791f85098a75795c0-2a02d2ee0058408fbcef5d7c75df4838.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-85577d9508e29c05364cccc92fa1c6ac.png" alt="50f2e9357bd4d42791f85098a75795c0"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/50f2e9357bd4d42791f85098a75795c0-2a02d2ee0058408fbcef5d7c75df4838.png" target="_blank" rel="noopener">50f2e9357bd4d42791f85098a75795c0</a></p>
<p>(2)复制上面的url地址，即：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd</span><br></pre></td></tr></table></figure>

<p>(3)在eclipse菜单栏中: window –&gt; Preferences –&gt; 在搜索框中搜索 [ xml ] XML –&gt; XML Catalog –&gt; User Specified Entries –&gt; Add…</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/eef68594c0d7b072e09702b3d6289831-da6604b74ae942c9a0e27565879c55a6.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-c630c3dad6bade32ffb34594d1e1934b.png" alt="eef68594c0d7b072e09702b3d6289831"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/eef68594c0d7b072e09702b3d6289831-da6604b74ae942c9a0e27565879c55a6.png" target="_blank" rel="noopener">eef68594c0d7b072e09702b3d6289831</a></p>
<p>(4)在弹出的窗口中:</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/e907b64d04d56389acba7c7e2f6bd74c-cba9037ad45f4a5ba191d984473736ed.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-68eadb9243ff12811b56bea1348cf8f5.png" alt="e907b64d04d56389acba7c7e2f6bd74c"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/e907b64d04d56389acba7c7e2f6bd74c-cba9037ad45f4a5ba191d984473736ed.png" target="_blank" rel="noopener">e907b64d04d56389acba7c7e2f6bd74c</a></p>
<h3 id="配置达内XML-Schema代理服务器"><a href="#配置达内XML-Schema代理服务器" class="headerlink" title="配置达内XML Schema代理服务器"></a>配置达内XML Schema代理服务器</h3><p>1、打开Eclipse的配置首选项</p>
<p>![<a href="http://doc.tedu.cn/img/1.png\](JAVAWEB-[![eb81455caf93624c289a4e60105b6aca](assets/1591871178-5431f18504a02a423ca84e597dd95e5a.png)](https://www.zhangpeng.fun/upload/2020/06/eb81455caf93624c289a4e60105b6aca-67e645a62bde49b28fcc2e35a2589c87.png)" target="_blank" rel="noopener">http://doc.tedu.cn/img/1.png\](JAVAWEB-[![eb81455caf93624c289a4e60105b6aca](assets/1591871178-5431f18504a02a423ca84e597dd95e5a.png)](https://www.zhangpeng.fun/upload/2020/06/eb81455caf93624c289a4e60105b6aca-67e645a62bde49b28fcc2e35a2589c87.png)</a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/eb81455caf93624c289a4e60105b6aca-67e645a62bde49b28fcc2e35a2589c87.png" target="_blank" rel="noopener">eb81455caf93624c289a4e60105b6aca</a></p>
<p>2、找到 XML -&gt; XML Catalog, 添加配置项目：</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/bf2d8978925006db94220c283a695f57-94054f0992804ea8bb0fddc0c21d042d.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-e26bbce57f51c702b09be41d0ef58ad3.png" alt="bf2d8978925006db94220c283a695f57"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/bf2d8978925006db94220c283a695f57-94054f0992804ea8bb0fddc0c21d042d.png" target="_blank" rel="noopener">bf2d8978925006db94220c283a695f57</a></p>
<p>3、添加URI代理配置, 比如：配置Spring Schema</p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/7e5343736b72ca605ac7e577025ccd9e-65db6fe953154f3b9146fc5993c4fa9f.png" target="_blank" rel="noopener"><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="assets/1591871178-5f4d7d839dee52a92eef391b9adbfcb0.png" alt="7e5343736b72ca605ac7e577025ccd9e"></a></p>
<p><a href="https://www.zhangpeng.fun/upload/2020/06/7e5343736b72ca605ac7e577025ccd9e-65db6fe953154f3b9146fc5993c4fa9f.png" target="_blank" rel="noopener">7e5343736b72ca605ac7e577025ccd9e</a></p>
<p><strong>4、可以配置的代理有</strong></p>
<table>
<thead>
<tr>
<th></th>
<th><a href="http://ibatis.apache.org/" target="_blank" rel="noopener">http://ibatis.apache.org</a></th>
<th><a href="http://doc.tedu.cn/" target="_blank" rel="noopener">http://doc.tedu.cn</a></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td><a href="http://www.springframework.org/" target="_blank" rel="noopener">http://www.springframework.org</a></td>
<td><a href="http://doc.tedu.cn/" target="_blank" rel="noopener">http://doc.tedu.cn</a></td>
</tr>
<tr>
<td></td>
<td><a href="http://mybatis.org/" target="_blank" rel="noopener">http://mybatis.org</a></td>
<td><a href="http://doc.tedu.cn/" target="_blank" rel="noopener">http://doc.tedu.cn</a></td>
</tr>
<tr>
<td></td>
<td><a href="http://hibernate.sourceforge.net/" target="_blank" rel="noopener">http://hibernate.sourceforge.net</a>, <a href="http://www.hibernate.org/" target="_blank" rel="noopener">http://www.hibernate.org</a></td>
<td><a href="http://doc.tedu.cn/" target="_blank" rel="noopener">http://doc.tedu.cn</a></td>
</tr>
<tr>
<td></td>
<td><a href="http://struts.apache.org/" target="_blank" rel="noopener">http://struts.apache.org</a></td>
<td><a href="http://doc.tedu.cn/" target="_blank" rel="noopener">http://doc.tedu.cn</a></td>
</tr>
</tbody></table>
<h1 id="mybatis-javaweb"><a href="#mybatis-javaweb" class="headerlink" title="mybatis   javaweb"></a><a href="https://www.zhangpeng.fun/tags/mybatis" target="_blank" rel="noopener">mybatis</a>   <a href="https://www.zhangpeng.fun/tags/javaweb" target="_blank" rel="noopener">javaweb</a></h1></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Zpeng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zpengit.github.io/2020/06/11/12-mybatis%E6%A1%86%E6%9E%B6/">https://zpengit.github.io/2020/06/11/12-mybatis%E6%A1%86%E6%9E%B6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zpengit.github.io" target="_blank">ZpengBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/javaweb/">javaweb</a><a class="post-meta__tags" href="/tags/mybatis/">mybatis</a></div><div class="post_share"><div class="social-share" data-image="/images/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="https://www.zhangpeng.fun/upload/2019/12/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98-d0ea2396aad94ee494ee35fb0d181818.png" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="https://www.zhangpeng.fun/upload/2019/12/%E6%94%AF%E4%BB%98%E5%AE%9D%E6%94%AF%E4%BB%98-9d1152a5c88d4f279eb570659f8ee922.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/11/13-spring%E6%A1%86%E6%9E%B6/"><img class="prev_cover" data-src="/images/avatar.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">13-spring框架</div></div></a></div><div class="next-post pull_right"><a href="/2020/06/11/11-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1/"><img class="next_cover" data-src="/images/avatar.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">11-MySQL数据库事务</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/06/11/03-HTML、CSS/" title="03-HTML、CSS"><img class="relatedPosts_cover" data-src="/images/avatar.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-11</div><div class="relatedPosts_title">03-HTML、CSS</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/11/01-MySQL/" title="01-MySQL"><img class="relatedPosts_cover" data-src="/images/avatar.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-11</div><div class="relatedPosts_title">01-MySQL</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/11/04-JavaScript/" title="04-JavaScript"><img class="relatedPosts_cover" data-src="/images/avatar.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-11</div><div class="relatedPosts_title">04-JavaScript</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/11/02-JDBC/" title="02-JDBC"><img class="relatedPosts_cover" data-src="/images/avatar.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-11</div><div class="relatedPosts_title">02-JDBC</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/11/06-tomcat、HTTP/" title="06-tomcat、HTTP"><img class="relatedPosts_cover" data-src="/images/avatar.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-11</div><div class="relatedPosts_title">06-tomcat、HTTP</div></div></a></div><div class="relatedPosts_item"><a href="/2020/06/11/05-jQuery/" title="05-jQuery"><img class="relatedPosts_cover" data-src="/images/avatar.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-11</div><div class="relatedPosts_title">05-jQuery</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'S0trUKQ7zXfHTlVtxYsLeXdK-gzGzoHsz',
  appKey: '2gMq58kQzMRpy84DWFFnm2Ew',
  notify: false,
  verify: false,
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: true,
  serverURLs: '',
  emojiCDN: '//i0.hdslb.com/bfs/emote/',
  emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_亲亲":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再见":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_发怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_发财":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可爱":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_呕吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_坏笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尴尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_惊吓":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png","custom_37":"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/22/097cd88f446efae87cb27de38c5eed15.png","custom_36":"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/22/ec2166501d29bc1eb7380c22944db462.png","custom_35":"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/22/8ca39f96c182e51cd752dde464157c2e.png","custom_34":"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/22/0a65c5dd18872b56605c08f7bae2e8c8.png","custom_33":"https://cdn.jsdelivr.net/gh/blogimg/picbed@latest/2020/04/22/ec3edbfe84684fdb1680307d261c3c7b.png","custom_32":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/31.webp","custom_31":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/30.gif","custom_30":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/29.webp","custom_29":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/28.webp","custom_28":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/27.webp","custom_27":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/26.webp","custom_26":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/25.jpg","custom_25":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/24.webp","custom_24":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/23.webp","custom_23":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/22.webp","custom_22":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/21.webp","custom_21":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/20.webp","custom_20":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/19.webp","custom_19":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/18.jpg","custom_18":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/17.webp","custom_17":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/16.webp","custom_16":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/15.webp","custom_15":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/14.webp","custom_14":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/13.webp","custom_13":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/12.webp","custom_12":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/11.webp","custom_11":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/10.webp","custom_10":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/9.webp","custom_9":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/8.webp","custom_8":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/7.webp","custom_7":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/6.gif","custom_6":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/5.gif","custom_5":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/4.jpg","custom_4":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/3.jpg","custom_3":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/2.webp","custom_2":"https://cdn.jsdelivr.net/gh/blogimg/emotion/custom/1.webp","custom_1":"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/19/c3164053d300cc5cca5e4dc3311842dc.png","custom_0":"https://cdn.jsdelivr.net/gh/blogimg/picbed@master/2020/04/19/6b5e768e524c8441ba66184bfdd86d4d.png"},
  enableQQ: true,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By Zpeng</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://zpengit.github.io/">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/search/local-search.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"react":{"opacity":0.7}});</script></body></html>